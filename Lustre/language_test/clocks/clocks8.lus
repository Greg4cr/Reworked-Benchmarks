
type choice = enum { On, Off };

node toto (x:int) returns (e:int)
var c:choice; a,b1,b2,d : int;
let
  a = 2*x;
  -- b1 = a + 1 when On(c);
  b1 = if On(c) then a + 1 else pre(a + 1);
  -- b2 = a - 1 when Off(c);
  b2 = if Off(c) then a - 1 else pre(a - 1);
  c = if 0=x then Off else On;
  d = merge c (On -> b1) (Off -> b2);
  e = d/2;
tel

